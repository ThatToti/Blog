# npm包的版本管理 



今天,一位朋友问了我这么一个问题:

![](/Users/toti/Downloads/包管理.jpeg)



虽然他表达得不是太清楚,其实大概意思就是npm的包的版本在多人协作或者在迭代中,如何进行可控的版本管理.



我们可以来看看一般项目中的package.json:

```js
{
  //...忽略掉不必要的信息
  "devDependencies": {
    "eslint": "^2.8.0",
    "eslint-plugin-requirejs": "^0.9.4",
    "grunt": "^1.0.1",
    "grunt-cli": "^1.2.0",
    "grunt-contrib-clean": "^1.0.0",
    "grunt-contrib-copy": "^1.0.0",
    "grunt-contrib-less": "^1.3.0",
    "grunt-contrib-requirejs": "^1.0.0",
    "grunt-contrib-uglify": "^1.0.1",
    "grunt-contrib-watch": "^1.0.0",
    "grunt-eslint": "^18.1.0",
    "grunt-rsync": "^1.0.1",
    "grunt-spritesmith": "^6.3.1",
    "grunt-string-replace": "^1.2.1",
    "grunt-tmodjs": "^0.1.5",
    "jit-grunt": "^0.10.0",
    "time-grunt": "^1.2.1",
    "tmodjs": "^1.0.4"
  },
  "dependencies": {
    "underscore": "^1.8.3"
  }
}
```



里面的包版本号前面,都带有一个`^` ,这里的意思是,这个包的对应版本号是一个集合`^1.8.3`.那么它将匹配就是1.x.x这个大版本里面的最新发布的次一级补丁版本,如果最近发布的是`^1.9.6`和`^1.8.9`,那么当我们`npm install` 的时候,就会匹配`^1.9.6`的 .



如果是`^0.2.3` 的话,那么就是0.2这个大版本里面匹配最新发布的次一级补丁版本.比如,最近发布了`^0.2.4`和`^0.2.5` ,那么将会匹配`^0.2.5`  



另外常见的版本前缀有:

```js
{
	'^':'匹配大版本下最新发布的次一级版本',
	'~':'匹配大版本下最新发布的最小一级版本',
    '>=&&<':'匹配大于等于或小于某个版本号的最新发布的版本',
    '*':'匹配最新发布的版本'
}
```



所以,我们在一开始的时候,就注意到这点,在安装包的时候,就有意识进行包的版本管理,免得日后踩坑修复半天.

